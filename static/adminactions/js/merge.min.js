(function(a){a(function(){var b=function(d){return function(f){f.preventDefault();var e=a(this).parent().parent();var g=e.find(d);a(".result input",e).val(a("input.raw-value",g).val());c()}};var c=function(){var d=[];a(".mergetable tr.merge-row").each(function(){var f=a(this).find("td.result");var g=a(this).find("td.origin");var e=a(this).find("td.other");var h=a(this).find("td:first").attr("data-content");a("td",this).removeClass("selected");if(a("input.raw-value",f).val()===a("input.raw-value",g).val()){a(this).find("td.origin").addClass("selected");a("p.display",f).text(a("p.display",g).text())}else{if(a("input.raw-value",f).val()===a("input.raw-value",e).val()){a(this).find("td.other").addClass("selected");a("p.display",f).text(a("p.display",e).text());d.push(h)}else{if(a(".original .display",this).text()!==a(".result .display",this).text()){a(this).addClass("changed")}}}});a("input[name=field_names]").val(d)};a("a.origin").click(b("td.origin"));a("a.other").click(b("td.other"));a("a.swap").click(function(e){e.preventDefault();var g=[];var d=[];var h=a('input[name="master_pk"]');var f=a('input[name="other_pk"]');a(".column.origin").each(function(){g.push([a("input.raw-value",this).val(),a(".display",this).text()])});a(".column.other").each(function(){d.push([a("input.raw-value",this).val(),a(".display",this).text()])});g.push(h.val());d.push(f.val());h.val(d.pop());f.val(g.pop());a('span[id="master_pk"]').text(h.val());a('span[id="other_pk"]').text(f.val());a(a(".column.origin").get().reverse()).each(function(){var i=d.pop();a("input.raw-value",this).val(i[0]);a(".display",this).text(i[1])});a(a(".column.other").get().reverse()).each(function(){var i=g.pop();a("input.raw-value",this).val(i[0]);a(".display",this).text(i[1])});c()});c()})})(django.jQuery);